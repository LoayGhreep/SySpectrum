[2025-05-05T17:19:12.501Z] INFO: 📦 SQLite DB loaded from /mnt/c/Users/Anonymous/Desktop/Personal/Projects/SySpectrum/syspectrum.db
[2025-05-05T17:19:13.538Z] DEBUG: [531217cd-80ff-4f2b-859f-34eee32efa13] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.540Z] DEBUG: [3a6ac330-0a8e-426d-a923-60b103747808] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.540Z] DEBUG: [6fac768a-84cf-4472-a622-c0fe8bc8d21e] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.545Z] DEBUG: [340e2516-ec6a-4be9-a768-e6218c29f5ef] 🧪 Validation middleware initialized with 3 rules
[2025-05-05T17:19:13.545Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] 🧪 Validation middleware initialized with 1 rules
[2025-05-05T17:19:13.545Z] DEBUG: [ef21a398-cf97-4146-889f-5e79513c2945] 🧪 Validation middleware initialized with 1 rules
[2025-05-05T17:19:13.546Z] DEBUG: [214ea3b1-ded0-4f58-9597-f73e2127afb3] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.813Z] DEBUG: [cbb3533b-86ea-49c8-b86d-192f9b414535] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.813Z] DEBUG: [f6cef2c5-dc7e-4171-b3ea-f8ab149e844a] 🧪 Validation middleware initialized with 3 rules
[2025-05-05T17:19:13.814Z] DEBUG: [30e05857-1857-4108-be7d-5ee310b5f3e2] 🧪 Validation middleware initialized with 2 rules
[2025-05-05T17:19:13.821Z] DEBUG: [311e465d-4f94-460c-9223-954c7e776f86] 🧪 Validation middleware initialized with 1 rules
[2025-05-05T17:19:13.822Z] DEBUG: [9d9687f4-74d0-42da-bc3c-57e079b4561e] 🧪 Validation middleware initialized with 1 rules
[2025-05-05T17:19:13.830Z] INFO: [41fada2b-f8dd-42c6-9013-33f220640f86] 🚀 Running migrations...
[2025-05-05T17:19:13.830Z] INFO: [84930592-5b33-4ef8-9c55-daf67a75cf62] 🚀 Starting database migration
[2025-05-05T17:19:13.830Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] 📄 Loading schema from /mnt/c/Users/Anonymous/Desktop/Personal/Projects/SySpectrum/backend/db/schema.sql
[2025-05-05T17:19:13.832Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Schema file read successfully
[2025-05-05T17:19:13.832Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] 🧱 Executing 5 schema statements
[2025-05-05T17:19:13.862Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Executed statement: -- 📊 Telemetry Table — stores agent metrics over ...
[2025-05-05T17:19:13.870Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Executed statement: CREATE INDEX IF NOT EXISTS idx_telemetry_agent_tim...
[2025-05-05T17:19:13.877Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Executed statement: -- 🛰️ Agents Table — registered agents with full ...
[2025-05-05T17:19:13.885Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Executed statement: -- 👥 Users Table — system users (admin/operator)...
[2025-05-05T17:19:13.893Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Executed statement: -- ⚙️ Settings Table — global settings
CREATE TAB...
[2025-05-05T17:19:13.893Z] INFO: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Tables created from schema.sql
[2025-05-05T17:19:13.893Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] 🔎 Checking for default admin user
[2025-05-05T17:19:13.894Z] DEBUG: [84930592-5b33-4ef8-9c55-daf67a75cf62] 🆕 Admin user not found, creating default admin
[2025-05-05T17:19:13.955Z] INFO: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Default admin user created (username: admin)
[2025-05-05T17:19:13.955Z] INFO: [84930592-5b33-4ef8-9c55-daf67a75cf62] ✅ Database migrations completed successfully in 125ms
[2025-05-05T17:19:13.955Z] INFO: [41fada2b-f8dd-42c6-9013-33f220640f86] ✅ Migrations completed in 125ms
[2025-05-05T17:19:13.957Z] INFO: [41fada2b-f8dd-42c6-9013-33f220640f86] 🧠 Syspectrum backend running on port 8080
[2025-05-05T17:19:22.511Z] INFO: [24352e61-0d92-4fa8-a1f8-57530772a3a8] 📥 POST /api/agents/register
[2025-05-05T17:19:22.514Z] DEBUG: [340e2516-ec6a-4be9-a768-e6218c29f5ef] 📝 Running validation on POST /api/agents/register
[2025-05-05T17:19:22.514Z] INFO: [340e2516-ec6a-4be9-a768-e6218c29f5ef] ✅ Validation passed
[2025-05-05T17:19:22.514Z] DEBUG: [340e2516-ec6a-4be9-a768-e6218c29f5ef] ⏱️ Validation duration: 0ms
[2025-05-05T17:19:22.514Z] DEBUG: [ead0dfc4-c183-423f-a910-cf72ab5ecb14] 📝 POST /agents/register | payload={"hostname":"DESKTOP-TBUNGH6","platform":"linux","arch":"x64","release":"5.15.167.4-microsoft-standard-WSL2","agentVersion":"1.0.0","timestamp":1746465562393}
[2025-05-05T17:19:22.514Z] DEBUG: [89758f20-5ed8-408e-8144-f4c9d259ec6d] ➕ Enter registerAgent | hostname=DESKTOP-TBUNGH6, platform=linux, agentVersion=1.0.0
[2025-05-05T17:19:22.523Z] INFO: [89758f20-5ed8-408e-8144-f4c9d259ec6d] 🎕 Agent registered and pending: DESKTOP-TBUNGH6 → agent_1746465562514_56258
[2025-05-05T17:19:22.523Z] DEBUG: [89758f20-5ed8-408e-8144-f4c9d259ec6d] ⏱️ Exit registerAgent | duration=9ms
[2025-05-05T17:19:22.524Z] INFO: [ead0dfc4-c183-423f-a910-cf72ab5ecb14] ✅ Agent registered | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.526Z] DEBUG: [ead0dfc4-c183-423f-a910-cf72ab5ecb14] ⏱️ /register complete | duration=12ms
[2025-05-05T17:19:22.526Z] INFO: [24352e61-0d92-4fa8-a1f8-57530772a3a8] 📤 POST /api/agents/register | 200 | 15ms
[2025-05-05T17:19:22.531Z] INFO: [381cf494-67ed-4821-8b61-dd51a02b6e05] 📥 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.531Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] 📝 Running validation on GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.532Z] INFO: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ✅ Validation passed
[2025-05-05T17:19:22.532Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ⏱️ Validation duration: 1ms
[2025-05-05T17:19:22.532Z] DEBUG: [af4ce2e7-c440-4b3c-b73f-13a0356c43de] 📥 GET /agents/claim | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.532Z] DEBUG: [c9075d34-6c40-495a-82d0-b01bf70b4a22] 🔍 Enter getClaimedAgent | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.533Z] DEBUG: [c9075d34-6c40-495a-82d0-b01bf70b4a22] ↩️ getClaimedAgent result | found=false
[2025-05-05T17:19:22.533Z] DEBUG: [c9075d34-6c40-495a-82d0-b01bf70b4a22] ⏱️ Exit getClaimedAgent | duration=1ms
[2025-05-05T17:19:22.533Z] INFO: [af4ce2e7-c440-4b3c-b73f-13a0356c43de] ⏳ Claim not approved | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:22.533Z] DEBUG: [af4ce2e7-c440-4b3c-b73f-13a0356c43de] ⏱️ /claim complete | duration=1ms
[2025-05-05T17:19:22.533Z] INFO: [381cf494-67ed-4821-8b61-dd51a02b6e05] 📤 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6 | 404 | 2ms
[2025-05-05T17:19:37.544Z] INFO: [9e2319aa-60d5-49c8-9d42-e892c0a4458d] 📥 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:37.545Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] 📝 Running validation on GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:37.545Z] INFO: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ✅ Validation passed
[2025-05-05T17:19:37.545Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ⏱️ Validation duration: 0ms
[2025-05-05T17:19:37.545Z] DEBUG: [2a71fda0-df5d-471c-98fa-6f9b273954d6] 📥 GET /agents/claim | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:37.545Z] DEBUG: [98ed13f8-f25b-41ea-aa02-046aef723bdd] 🔍 Enter getClaimedAgent | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:37.547Z] DEBUG: [98ed13f8-f25b-41ea-aa02-046aef723bdd] ↩️ getClaimedAgent result | found=false
[2025-05-05T17:19:37.547Z] DEBUG: [98ed13f8-f25b-41ea-aa02-046aef723bdd] ⏱️ Exit getClaimedAgent | duration=2ms
[2025-05-05T17:19:37.547Z] INFO: [2a71fda0-df5d-471c-98fa-6f9b273954d6] ⏳ Claim not approved | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:37.548Z] DEBUG: [2a71fda0-df5d-471c-98fa-6f9b273954d6] ⏱️ /claim complete | duration=3ms
[2025-05-05T17:19:37.548Z] INFO: [9e2319aa-60d5-49c8-9d42-e892c0a4458d] 📤 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6 | 404 | 4ms
[2025-05-05T17:19:38.180Z] INFO: [60add889-4def-4276-9390-4d2d1bc3f4e8] 📥 PATCH /api/agents/DESKTOP-TBUNGH6
[2025-05-05T17:19:38.180Z] DEBUG: [62eb5376-a2fa-4f80-983c-cce4b26100dd] 🔐 auth middleware invoked | requiredRole=any
[2025-05-05T17:19:38.182Z] DEBUG: [62eb5376-a2fa-4f80-983c-cce4b26100dd] ✅ Token verified | user=admin, role=admin
[2025-05-05T17:19:38.182Z] DEBUG: [62eb5376-a2fa-4f80-983c-cce4b26100dd] 🔓 Access granted | user=admin
[2025-05-05T17:19:38.183Z] DEBUG: [62eb5376-a2fa-4f80-983c-cce4b26100dd] ⏱️ auth middleware complete | duration=3ms
[2025-05-05T17:19:38.183Z] DEBUG: [214ea3b1-ded0-4f58-9597-f73e2127afb3] 📝 Running validation on PATCH /api/agents/DESKTOP-TBUNGH6
[2025-05-05T17:19:38.183Z] INFO: [214ea3b1-ded0-4f58-9597-f73e2127afb3] ✅ Validation passed
[2025-05-05T17:19:38.183Z] DEBUG: [214ea3b1-ded0-4f58-9597-f73e2127afb3] ⏱️ Validation duration: 0ms
[2025-05-05T17:19:38.183Z] DEBUG: [bbb6b69b-d852-4b4f-af47-86bb49af6b7a] ✏️ PATCH /agents/DESKTOP-TBUNGH6 | payload={"label":"WebServer","status":1}
[2025-05-05T17:19:38.184Z] DEBUG: [1061090b-f99e-46e0-a4d0-46fe2b54e099] ✏️ Enter updateAgentByHostname | hostname=DESKTOP-TBUNGH6, fields={"label":"WebServer","status":1}
[2025-05-05T17:19:38.192Z] INFO: [1061090b-f99e-46e0-a4d0-46fe2b54e099] ✏️ Agent updated via hostname: DESKTOP-TBUNGH6
[2025-05-05T17:19:38.193Z] DEBUG: [1061090b-f99e-46e0-a4d0-46fe2b54e099] ⏱️ Exit updateAgentByHostname | duration=9ms
[2025-05-05T17:19:38.193Z] INFO: [bbb6b69b-d852-4b4f-af47-86bb49af6b7a] ✅ Agent updated | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:38.193Z] DEBUG: [bbb6b69b-d852-4b4f-af47-86bb49af6b7a] ⏱️ /agents/:hostname PATCH complete | duration=10ms
[2025-05-05T17:19:38.194Z] INFO: [62eb5376-a2fa-4f80-983c-cce4b26100dd] 📤 PATCH /api/agents/DESKTOP-TBUNGH6 | 200 | 14ms
[2025-05-05T17:19:52.561Z] INFO: [c2b6f841-d281-4f53-9dd4-da8741425603] 📥 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:52.562Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] 📝 Running validation on GET /api/agents/claim?hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:52.562Z] INFO: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ✅ Validation passed
[2025-05-05T17:19:52.562Z] DEBUG: [57156505-59ac-4e0c-ab9a-b695e8da49ab] ⏱️ Validation duration: 0ms
[2025-05-05T17:19:52.562Z] DEBUG: [5f0c8151-bbb0-4947-a7d7-c15aabd52ce0] 📥 GET /agents/claim | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:52.562Z] DEBUG: [cc6ac3e2-18a4-4c5a-9e93-87117eebc22a] 🔍 Enter getClaimedAgent | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:52.564Z] DEBUG: [cc6ac3e2-18a4-4c5a-9e93-87117eebc22a] ↩️ getClaimedAgent result | found=true
[2025-05-05T17:19:52.564Z] DEBUG: [cc6ac3e2-18a4-4c5a-9e93-87117eebc22a] ⏱️ Exit getClaimedAgent | duration=2ms
[2025-05-05T17:19:52.564Z] INFO: [5f0c8151-bbb0-4947-a7d7-c15aabd52ce0] 📦 Claim approved | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:19:52.565Z] DEBUG: [5f0c8151-bbb0-4947-a7d7-c15aabd52ce0] ⏱️ /claim complete | duration=3ms
[2025-05-05T17:19:52.565Z] INFO: [c2b6f841-d281-4f53-9dd4-da8741425603] 📤 GET /api/agents/claim?hostname=DESKTOP-TBUNGH6 | 200 | 4ms
[2025-05-05T17:19:57.572Z] INFO: [0f47d05c-665a-4c6b-865c-ae4d77907aa6] 📥 POST /api/heartbeat
[2025-05-05T17:19:57.573Z] INFO: [0f47d05c-665a-4c6b-865c-ae4d77907aa6] 📤 POST /api/heartbeat | 404 | 1ms
[2025-05-05T17:20:02.760Z] INFO: [5ac5be4b-0eea-4a25-8bcc-2791077ef71f] 📥 POST /api/heartbeat
[2025-05-05T17:20:02.761Z] INFO: [5ac5be4b-0eea-4a25-8bcc-2791077ef71f] 📤 POST /api/heartbeat | 404 | 1ms
[2025-05-05T17:20:07.763Z] INFO: [5e9ad91b-33aa-4164-8b43-37d320a7b3c0] 📥 POST /api/heartbeat
[2025-05-05T17:20:07.764Z] INFO: [5e9ad91b-33aa-4164-8b43-37d320a7b3c0] 📤 POST /api/heartbeat | 404 | 1ms
[2025-05-05T17:20:12.759Z] INFO: [7507ded7-2dfd-4ac5-a0e8-cb6c2ce08f70] 📥 POST /api/telemetry
[2025-05-05T17:20:12.760Z] DEBUG: [531217cd-80ff-4f2b-859f-34eee32efa13] 📝 Running validation on POST /api/telemetry
[2025-05-05T17:20:12.760Z] INFO: [531217cd-80ff-4f2b-859f-34eee32efa13] ✅ Validation passed
[2025-05-05T17:20:12.760Z] DEBUG: [531217cd-80ff-4f2b-859f-34eee32efa13] ⏱️ Validation duration: 0ms
[2025-05-05T17:20:12.760Z] DEBUG: [84ae3029-3cf0-482b-877b-9c44d0704f3a] 🛰️ POST /telemetry | Receiving telemetry | hostname=DESKTOP-TBUNGH6
[2025-05-05T17:20:12.760Z] DEBUG: [cbc4d8b5-2e11-4ba8-9140-05c29dc9a4b7] 📥 Enter insertTelemetry | safePreview={"hostname":"DESKTOP-TBUNGH6","timestamp":1746465612579,"temperature":{"cpu":null}}
[2025-05-05T17:20:12.761Z] ERROR: [cbc4d8b5-2e11-4ba8-9140-05c29dc9a4b7] ❌ Failed to insert telemetry: Too few parameter values were provided
[2025-05-05T17:20:12.761Z] DEBUG: [cbc4d8b5-2e11-4ba8-9140-05c29dc9a4b7] ⏱️ Exit insertTelemetry | duration=1ms
[2025-05-05T17:20:12.761Z] ERROR: [84ae3029-3cf0-482b-877b-9c44d0704f3a] ❌ Error inserting telemetry | hostname=DESKTOP-TBUNGH6 | Too few parameter values were provided
[2025-05-05T17:20:12.761Z] DEBUG: [84ae3029-3cf0-482b-877b-9c44d0704f3a] ⏱️ POST /telemetry complete | duration=1ms
[2025-05-05T17:20:12.761Z] INFO: [7507ded7-2dfd-4ac5-a0e8-cb6c2ce08f70] 📤 POST /api/telemetry | 500 | 2ms
[2025-05-05T17:20:12.763Z] INFO: [feef0ac6-800f-4b9a-95fd-df04c0a8f076] 📥 POST /api/heartbeat
[2025-05-05T17:20:12.764Z] INFO: [feef0ac6-800f-4b9a-95fd-df04c0a8f076] 📤 POST /api/heartbeat | 404 | 1ms
